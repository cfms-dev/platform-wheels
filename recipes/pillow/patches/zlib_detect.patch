--- setup.py.orig
+++ setup.py
@@ -1,5 +1,6 @@
 import os
 import re
+import glob
 import struct
 import subprocess
 import sys
@@ -395,6 +396,20 @@ class pil_build_ext(build_ext):
         _add_directory(library_dirs, "/usr/local/lib")
         _add_directory(include_dirs, "/usr/local/include")
 
+        # For cross-compilation: Auto-detect cross-compiled zlib in /tmp
+        zlib_dirs = glob.glob('/tmp/zlib-install-*/include')
+        if zlib_dirs:
+            include_dir = zlib_dirs[0]
+            lib_dir = include_dir.replace('/include', '/lib')
+            print(f"Found cross-compiled zlib:")
+            print(f"  Include: {include_dir}")
+            print(f"  Lib: {lib_dir}")
+            if os.path.exists(lib_dir):
+                _add_directory(library_dirs, lib_dir)
+                _add_directory(include_dirs, include_dir)
+                feature.zlib = "zlib"
+                print("  Added to build paths")
+
         _add_directory(library_dirs, "/usr/lib")
         _add_directory(include_dirs, "/usr/include")
 
