--- setup.py.orig	2025-11-13 06:35:29.082886858 +0000
+++ setup.py	2025-11-13 06:36:35.672375574 +0000
@@ -9,6 +9,7 @@
 from __future__ import annotations
 
 import os
+import glob
 import re
 import shutil
 import struct
@@ -688,10 +689,56 @@
             _add_directory(library_dirs, "/usr/local/lib")
             _add_directory(include_dirs, "/usr/local/include")
 
-            _add_directory(library_dirs, "/usr/lib")
-            _add_directory(include_dirs, "/usr/include")
-            # alpine, at least
-            _add_directory(library_dirs, "/lib")
+            # For cross-compilation: Auto-detect cross-compiled libraries in /tmp
+            # This handles zlib, libjpeg, and libtiff built by our build scripts
+            is_cross_compiling = False
+            
+            zlib_dirs = glob.glob('/tmp/zlib-install-*/include')
+            if zlib_dirs:
+                is_cross_compiling = True
+                include_dir = zlib_dirs[0]
+                lib_dir = include_dir.replace('/include', '/lib')
+                print(f"Found cross-compiled zlib:")
+                print(f"  Include: {include_dir}")
+                print(f"  Lib: {lib_dir}")
+                if os.path.exists(lib_dir):
+                    _add_directory(library_dirs, lib_dir)
+                    _add_directory(include_dirs, include_dir)
+                    print("  Added to build paths")
+            
+            libjpeg_dirs = glob.glob('/tmp/libjpeg-install-*/include')
+            if libjpeg_dirs:
+                is_cross_compiling = True
+                include_dir = libjpeg_dirs[0]
+                lib_dir = include_dir.replace('/include', '/lib')
+                print(f"Found cross-compiled libjpeg:")
+                print(f"  Include: {include_dir}")
+                print(f"  Lib: {lib_dir}")
+                if os.path.exists(lib_dir):
+                    _add_directory(library_dirs, lib_dir)
+                    _add_directory(include_dirs, include_dir)
+                    print("  Added to build paths")
+            
+            libtiff_dirs = glob.glob('/tmp/libtiff-install-*/include')
+            if libtiff_dirs:
+                is_cross_compiling = True
+                include_dir = libtiff_dirs[0]
+                lib_dir = include_dir.replace('/include', '/lib')
+                print(f"Found cross-compiled libtiff:")
+                print(f"  Include: {include_dir}")
+                print(f"  Lib: {lib_dir}")
+                if os.path.exists(lib_dir):
+                    _add_directory(library_dirs, lib_dir)
+                    _add_directory(include_dirs, include_dir)
+                    print("  Added to build paths")
+            
+            # Skip host system paths when cross-compiling to avoid header conflicts
+            if not is_cross_compiling:
+
+                _add_directory(library_dirs, "/usr/lib")
+                _add_directory(include_dirs, "/usr/include")
+                # alpine, at least
+                _add_directory(library_dirs, "/lib")
 
         if sys.platform == "win32":
             # on Windows, look for the OpenJPEG libraries in the location that
